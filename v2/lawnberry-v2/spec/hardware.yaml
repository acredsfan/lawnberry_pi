rpi:
  supported_models: ["Raspberry Pi 5 (4-16GB)", "Raspberry Pi 4B (4–8GB)"]
  os: "Raspberry Pi OS Bookworm (64-bit)"
  python: "3.11.x"

navigation:
  gps:
    preferred:
      name: "SparkFun GPS-RTK-SMA (u-blox ZED-F9P)"
      interface: "USB"
      rtk: true
      corrections: "NTRIP"
    alternative:
      name: "u-blox Neo-8M"
      interface: "UART"
      rtk: false
      accuracy: "3–5 m"
      optional: true

sensors:
  tof:
    left:  { model: "VL53L0X", bus: "I2C", address: 0x29 }
    right: { model: "VL53L0X", bus: "I2C", address: 0x30 }
  environmental:
    bme280: { model: "BME280", bus: "I2C", address: 0x76 }
  display:
    oled: { model: "SSD1306 128x64", bus: "I2C", address: 0x3C }
  orientation:
    bno085: { model: "BNO085", uart: "UART4", optional: false, preferred_baud: 3000000 }

ai_acceleration:
  priority: ["coral", "hailo", "cpu"]
  coral:
    interface: "USB"
    isolated_venv: true
  hailo:
    type: "Hailo-8 AI Hat"
    optional: true
    conflict_note: "Cannot be used concurrently with RoboHAT without splitter; not officially supported."
  cpu:
    runtimes: ["tflite", "opencv-dnn"]

vision:
  camera: { model: "Pi Camera v2", modes: ["1920x1080@30fps"] }

power:
  battery:
    chemistry: "LiFePO4"
    voltage: 12.8
    max_voltage: 14.6
    min_voltage: 10.0
    capacity_ah: 30
  solar:
    panel_watts: 30
    controller: "15A MPPT"
  monitoring:
    ina3221:
      bus: "I2C"
      address: 0x40
      channels:
        channel_1:
          name: "Battery"
          attached_to: "Battery"
        channel_2:
          name: "Unused"
          attached_to: "Not connected"
        channel_3:
          name: "Solar Input"
          attached_to: "Solar Panel"

drive_system:
  preferred:
    controller: "RoboHAT RP2040 → Cytron MDDRC10"
    features: ["PWM control", "encoder feedback", "safety IO"]
  alternative:
    controller: "L298N Dual H-Bridge"
    features: ["PWM control", "basic directional control"]
  encoders: { type: "Hall effect", magnets_per_wheel: 4 }

cutting_system:
  blade_motor: { type: "997 DC Motor" }
  blade_driver:
    model: "IBT-4 H-Bridge"
    gpio_in1: 24
    gpio_in2: 25
  safety: { tilt_cutoff: true, estop: true }

comms:
  wifi: { enabled: true }
  bluetooth: { version: "5.0", optional: true }
  ethernet: { bench_only: true }   # Not for mower runtime

pins:
  gpio_used:
    - { pin: 15, gpio: 22, role: "ToF Left Shutdown" }
    - { pin: 16, gpio: 23, role: "ToF Right Shutdown" }
    - { pin: 18, gpio: 24, role: "Blade IN1" }
    - { pin: 22, gpio: 25, role: "Blade IN2" }
    - { pin: 31, gpio: 6,  role: "ToF Left Interrupt" }
    - { pin: 32, gpio: 12, role: "ToF Right Interrupt" }
    - { pin: 33, rxd: 4,  role: "BNO085 RX", rpi4_alt_pin: 21 }
    - { pin: 32, txd: 4,  role: "BNO085 TX", rpi4_alt_pin: 24 }

  i2c_addresses:
    "0x29": "VL53L0X Left"
    "0x30": "VL53L0X Right"
    "0x3C": "SSD1306 OLED"
    "0x40": "INA3221"
    "0x76": "BME280"

  serial_uart_used:
    - { uart: "UART0", role: "GPS", preferred_baud: 115200 }
    - { uart: "UART1", role: "RoboHAT", preferred_baud: 38400 }
    - { uart: "UART4", role: "BNO085", preferred_baud: 3000000 }

  usb_used:
    - { role: "GPS", notes: "u-blox ZED-F9P via SparkFun GPS-RTK-SMA" }
    - { role: "Coral TPU", notes: "Google Coral USB Accelerator" }
    - { role: "High Gain WiFi Adapter", notes: "preferred" }
